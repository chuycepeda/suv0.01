{% extends landing_layout %}
<!--
    ADD PAGE HEAD ELEMENTS
-->
{% block title %}
<title>
    {{app_name}} Â» Compromisos abiertos
</title>
{% endblock %}
{% block page_css %}
<link href="/{{theme}}/materialize/css/plugins/perfect-scrollbar/perfect-scrollbar.css" type="text/css" rel="stylesheet" media="screen,projection"/>
<style>
    .create{
    transition-timing-function: ease-in;
    transition: border 0.3s;
    -webkit-transition-timing-function: ease-in;
    -webkit-transition: border 0.3s;
    }
    .create:hover{
    border-bottom: 6px solid {{brand_color}};
    }
    .chip {
    display: inline-block;
    height: 32px;
    font-size: 13px;
    font-weight: 500;
    color: rgba(0, 0, 0, 0.6);
    line-height: 32px;
    padding: 0 12px;
    border-radius: 16px;
    background-color: #e4e4e4;
    }
    .hoverable:hover{
    box-shadow: #A9A6A6 0px 8px 23px 6px;
    transition: all .3s ease-out;
    }
    .hoverable{
    transition: all .3s ease-out;
    cursor: pointer;
    }
    h3{
    line-height: 60px;
    letter-spacing: 0.2px;
    }

    .initiative .image{
        transform: scale(0.5);-webkit-transform:scale(0.5);width: 100%;height:80px;margin-bottom: -10px;margin-top:-25px;
    }
</style>
<style shim-shadowdom>
    paper-tabs {
    background-color: transparent;
    color: {{brand_secondary_color}};
    cursor:pointer;
    }
    paper-tabs[noink][nobar] paper-tab.core-selected {
    color: {{brand_color}};
    }
    paper-tabs::shadow #selectionBar {
    background-color: {{brand_color}};
    }
    paper-tabs paper-tab::shadow #ink {
    color: {{brand_color}};
    }
    paper-tab {
    cursor:pointer;
    }
</style>
{% endblock %}
{% block page_components %}
<link href="/boilerplate/webcomponents/bower_components/paper-tabs/paper-tabs.html" rel="import"/>
{% endblock %}
{% block header_content %}
<div class="parallax-container" style="max-height:200px;overflow:hidden;margin-bottom: -80px;">
    <div class="section no-pad-bot">
        <div class="container">
            <h2 class="header center brand-color-text" style="margin-top:85px;">
                Compromisos abiertos
            </h2>
        </div>
    </div>
</div>
{% endblock %}
{% block body_content %}
<div class="section">
    <div class="container" style="margin-top:80px">
        <div class="row">
            <h3 class="col s12 m7 offset-m1 grey-text" style="font-weight: 200">
                Conoce el avance y a los responsables de los compromisos e iniciativas de tu gobierno.
            </h3>
            {% if has_petitions %}
            <div class="col card-panel s12 m2 white center create hoverable" style="padding-top: 30px;padding-bottom: 60px;cursor: pointer;" onclick='window.location = "{{uri_for('materialize-petition-new')}}";'>
                <h2 class="grey-text">
                    <i class="mdi-image-wb-incandescent" style="font-size:34px">
                    </i>
                </h2>
                <h5 class="brand-color-text" style="font-family: roboto-thin;">
                    Proponer un compromiso
                </h5>
            </div>
            {% endif %}
        </div>
        {% if count > 0 %}
        <div class="row">
            <h5 class="col s12 m10 offset-m1 grey-text">
            </h5>
            <div class="divider col s12 m10 offset-m1" style="margin-bottom:20px;">
            </div>
            <div class="col s12 m10 offset-m1 center">
                <paper-tabs id="scrollableTabs" selected="0" scrollable style="margin-left: -20px;height: 80px;margin-top: 5px;">
                    {% for area in areas %}
                    <paper-tab onclick="loadInits('{{area.get_id()}}')" style="color: #{{area.color}};">
                        <a class="image" style=" background-color: #{{area.color}};  -webkit-mask: url({{area.icon_url}}) no-repeat 50% 50%;transform: scale(0.5);-webkit-transform:scale(0.5);width: 30px;">
                        </a>
                        {{area.name}}
                    </paper-tab>
                    {% endfor %}
                </paper-tabs>
            </div>
            <div class="col s12 m10 offset-m1 center" id="tab-content" style="margin-top:40px;">
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
{% block footer_content %}
{% endblock %}
{% block page_scripts %}
<script>
    function loadInits(id){
          var html = '';
          var url = "{{ uri_for('materialize-transparency-areas') }}?area_id="+id;

          $.ajax({
              url: url,
              type: 'GET',
              success: function(data) { 
                  console.log(data);
              }
          }).done(function(data) {
              document.getElementById('tab-content').innerHTML = data.initiatives.html;
              Materialize.fadeInImage('#tab-content');        
          });
          

    }

    {% if count > 0 %}
    loadInits('{{first_area.get_id()}}');
    {% endif %}

    function loadDetail(id){
         window.location.href = '{{uri_for("materialize-transparency-init")}}'+id+'/';
    }
</script>
{% endblock %}
